# 一、通用接口约束（所有接口必须遵守）
## 1.1 接口风格
遵循 RESTful 规范：GET=查询、POST=创建、PUT=修改、DELETE=删除

## 1.2 统一响应格式
```json
{
  //原文档的code是http状态码，可通过响应头直接获取，不需要在json数据中写入
  "code": 1,//1为成功，0（默认）及其他为失败，具体的code根据不同接口来填写（比如还可以添加-1之类的，此时可以是因为某些具体原因失败）
  "msg": "操作成功", // 成功时提示信息，失败时应返回具体的错误提示
  "data": {}, // 业务数据（根据接口返回具体结构）
  "timestamp": 1699999999999 // 服务器时间戳
}
```

## 1.3 分页参数统一
`url`中的查询参数固定为 `pageNum=1&pageSize=10`（pageNum 默认1，pageSize 默认10）

## 1.4 枚举值统一
```json
{
  "roleType": { "1": "科研人员", "2": "普通用户", "3": "管理员", "4": "数据处理员", "5": "统计分析师" },
  "achievementType": { "1": "期刊论文", "2": "专利", "3": "科研项目", "4": "奖项" },
  "privacyLevel": { "1": "公开", "2": "机构内可见", "3": "私有" }
}
```

## 1.5 权限传递
默认所有接口均需在请求头携带 `Authorization: Bearer {Token}`

==不需要的接口会明确指出==

## 1.6 文件交互规则
非结构化文件（PDF/头像等）需传递==华为云OBS==返回的 `fileId`（文件唯一标识），**不直接传递文件流**

因此所有的请求头和返回头的`content-type`都应是`applicatoin/json`


# 二、用户管理模块接口约束
## 2.1 门户认领（POST /api/users/researcher/register）
### 2.1.1 请求体JSON
```json
{
  "institution": "XX大学", // String，必填，所属机构
  "certFileId": "obs-cert-123" // String，必填，实名认证材料OBS的fileId
}
```
### 2.1.2 返回体JSON
```json
{
  "code": 1,//1为认领上传成功，0为上传失败（其他原因），-1为参数为空，-2为未找到认证材料
  "msg": "上传成功，等待管理员审核",//失败提示语句：“缺少xxx”，“未找到认证材料”，“其他原因”
  "data": {
    "userId": "23373268", // String，用户唯一ID
  },
  "timestamp": 1699999999999
}
```

## 2.2 普通用户注册（POST /api/users/normal/register）

==不需要token==

### 2.2.1 请求参数JSON
```json
{
  "username": "lisan", // String，必填，唯一
  "password": "Bb123456!", // String，必填
  //确认密码应在前端完成，不需要传到后端再次验证
  "email": "lisan@xxx.com" // String，必填，前端应验证格式是否错误
}
```
### 2.2.2 返回数据JSON
```json
{
  "code": 1,//1为注册成功，0为注册失败（用户名不为空），-1为缺少参数
  "msg": "注册成功",
  "data": {
    "userId": "23371026",
    "roleType": 2 // Number，角色类型（2=普通用户）
  },
  "timestamp": 1699999999999
}
```

## 2.3 多角色登录（通用）（POST /api/users/login）
### 2.3.1 请求参数JSON
```json
{
  "username": "zhaomingze", // String，必填
  "password": "Aa123456!",  // String，必填
  "roleType": 1 // Number，必填，1=科研人员/2=普通用户/3=管理员
}
```
### 2.3.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...", // String，身份令牌
    "userInfo": {
      "userId": "23373268",
      "name": "赵明泽",
      "roleType": 1,
      "institution": "XX大学",
      "avatar": "https://obs-academic.xxx.com/static/avatar/23373268.png" // String，OBS路径
    }
  },
  "timestamp": 1699999999999
}
```

## 2.4 退出登录（POST /api/users/logout）
### 2.4.1 请求参数JSON
```json
{} // 无请求参数（依赖请求头Token）
```
### 2.4.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "退出成功",
  "data": null,
  "timestamp": 1699999999999
}
```

## 2.5 获取当前用户信息（GET /api/users/current）
### 2.5.1 请求参数JSON
```json
{} // 无请求参数（依赖Token）
```
### 2.5.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "userId": "23373268",
    "name": "赵明泽",
    "roleType": 1,
    "institution": "XX大学",
    "email": "zhaomingze@xxx.com",
    "certStatus": 1,
    "privacyDefault": 1 // Number，默认隐私级别（1=公开）
  },
  "timestamp": 1699999999999
}
```

## 2.6 修改用户信息（PUT /api/users/current）
### 2.6.1 请求参数JSON
```json
{
  "name": "赵明泽", // String，可选，真实姓名
  "email": "new-zhaomingze@xxx.com", // String，可选，新邮箱
  "institution": "XX理工大学", // String，可选，新机构
  "avatarFileId": "obs-avatar-456" // String，可选，新头像fileId
}
```
### 2.6.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "修改成功",
  "data": {
    "userId": "23373268",
    "name": "赵明泽",
    "email": "new-zhaomingze@xxx.com",
    "avatar": "https://obs-academic.xxx.com/static/avatar/obs-avatar-456.png"
  },
  "timestamp": 1699999999999
}
```

## 2.7 管理员审核科研人员账户（PUT /api/admin/users/audit/{userId}）
### 2.7.1 请求参数JSON
```json
{
  "auditResult": 1, // Number，必填，1=通过，2=拒绝
  "rejectReason": "" // String，可选，拒绝时填写原因（审核通过时可省略）
}
```
### 2.7.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "审核完成",
  "data": {
    "userId": "23373268",
    "certStatus": 1, // Number，1=已通过，2=已拒绝
    "auditTime": "2024-10-01 14:30:00"
  },
  "timestamp": 1699999999999
}
```

## 2.8 密码重置（邮箱验证）（POST /api/users/password/reset）
### 2.8.1 请求参数JSON
```json
{
  "username": "zhaomingze", // String，必填
  "email": "zhaomingze@xxx.com", // String，必填，绑定邮箱
  "verifyCode": "654321" // String，必填，邮箱收到的验证码
}
```
### 2.8.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "密码重置链接已发送至邮箱",
  "data": {
    "expireTime": "2024-10-01 16:30:00" // String，链接过期时间
  },
  "timestamp": 1699999999999
}
```


# 三、学术成果模块接口约束
## 3.1 科研人员上传成果（POST /api/achievements）
### 3.1.1 请求参数JSON
```json
{
  "title": "基于AI的图像识别研究", // String，必填，成果标题
  "authorList": ["赵明泽", "周鹏"], // Array<String>，必填，作者列表
  "institutionList": ["XX大学"], // Array<String>，必填，机构列表
  "publishTime": "2024-05-10", // String，必填，格式YYYY-MM-DD
  "achievementType": 1, // Number，必填，1=期刊论文/2=专利/3=科研项目/4=奖项
  "journal": "计算机学报", // String，可选，成果类型=1时必填
  "impactFactor": 5.2, // Number，可选，成果类型=1时必填（影响因子）
  "patentNo": "", // String，可选，成果类型=2时必填（专利号）
  "projectLevel": "", // Number，可选，成果类型=3时必填（1=国家级/2=省级）
  "awardLevel": "", // Number，可选，成果类型=4时必填（1=国家级/2=省级）
  "abstract": "本文提出一种基于深度学习的图像识别方法...", // String，必填，成果摘要
  "fileId": "obs-ach-789", // String，必填，成果全文OBS的fileId
  "privacyLevel": 1 // Number，必填，1=公开/2=机构内可见/3=私有
}
```
### 3.1.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "上传成功",
  "data": {
    "achievementId": "ach001" // String，成果唯一ID
  },
  "timestamp": 1699999999999
}
```

## 3.2 科研人员修改成果（PUT /api/achievements/{achId}）
### 3.2.1 请求参数JSON
```json
{
  "title": "基于深度学习的图像识别研究", // String，可选，需修改的标题
  "abstract": "更新后的成果摘要...", // String，可选，需修改的摘要
  "privacyLevel": 2 // Number，可选，需修改的隐私级别
}
```
### 3.2.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "修改成功",
  "data": {
    "achievementId": "ach001",
    "title": "基于深度学习的图像识别研究",
    "abstract": "更新后的成果摘要...",
    "privacyLevel": 2
  },
  "timestamp": 1699999999999
}
```

## 3.3 科研人员删除成果（DELETE /api/achievements/{achId}）
### 3.3.1 请求参数JSON
```json
{} // 无请求参数（依赖Token验证成果所有者）
```
### 3.3.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "删除成功",
  "data": null,
  "timestamp": 1699999999999
}
```

## 3.4 普通用户浏览成果详情（GET /api/achievements/{achId}）
### 3.4.1 请求参数JSON
```json
{} // 无请求参数
```
### 3.4.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "achievementId": "ach001",
    "title": "基于AI的图像识别研究",
    "authorList": ["赵明泽", "周鹏"],
    "institutionList": ["XX大学"],
    "publishTime": "2024-05-10",
    "achievementType": 1,
    "achievementTypeName": "期刊论文",
    "journal": "计算机学报",
    "impactFactor": 5.2,
    "abstract": "本文提出一种基于深度学习的图像识别方法...",
    "fileUrl": "https://obs-academic.xxx.com/static/achievements/obs-ach-789.pdf", // String，OBS路径
    "citationCount": 30, // Number，引用次数
    "hasDownloadPerm": true // Boolean，是否有权下载（根据隐私级别判断）
  },
  "timestamp": 1699999999999
}
```

## 3.5 普通用户下载成果全文（GET /api/achievements/{achId}/download）
### 3.5.1 请求参数JSON
```json
{} // 无请求参数（后端验证下载权限）
```
### 3.5.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "获取下载链接成功",
  "data": {
    "downloadUrl": "https://obs-academic.xxx.com/static/achievements/obs-ach-789.pdf?sign=xxx", // String，OBS签名临时链接
    "expireTime": "2024-10-01 15:30:00" // String，链接过期时间
  },
  "timestamp": 1699999999999
}
```

## 3.6 普通用户收藏成果（POST /api/achievements/{achId}/collect）
### 3.6.1 请求参数JSON
```json
{} // 无请求参数（依赖Token获取当前用户）
```
### 3.6.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "收藏成功",
  "data": {
    "collectId": "col001" // String，收藏唯一ID
  },
  "timestamp": 1699999999999
}
```

## 3.7 普通用户取消收藏（DELETE /api/achievements/{achId}/collect）
### 3.7.1 请求参数JSON
```json
{} // 无请求参数
```
### 3.7.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "取消收藏成功",
  "data": null,
  "timestamp": 1699999999999
}
```

## 3.8 科研人员获取成果引用通知（GET /api/achievements/notifications）
### 3.8.1 请求参数JSON
```json
{
  "pageNum": 1, // Number，必填，分页页码
  "pageSize": 10, // Number，必填，每页条数
  "notifyStatus": 1 // Number，可选，1=未读/2=已读
}
```
### 3.8.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "total": 5, // Number，总通知数
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "notifyId": "not001",
        "quotedAchId": "ach001", // String，被引用成果ID
        "quotedAchTitle": "基于AI的图像识别研究", // String，被引用成果标题
        "quoterName": "李季昊", // String，引用作者姓名
        "quoteSource": "电子学报", // String，引用发表来源
        "notifyTime": "2024-09-30 10:00:00", // String，通知时间
        "notifyStatus": 1 // Number，1=未读/2=已读
      }
    ]
  },
  "timestamp": 1699999999999
}
```

## 3.9 标记引用通知为已读（PUT /api/achievements/notifications/{notifyId}）
### 3.9.1 请求参数JSON
```json
{} // 无请求参数
```
### 3.9.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "标记成功",
  "data": {
    "notifyId": "not001",
    "notifyStatus": 2
  },
  "timestamp": 1699999999999
}
```


# 四、搜索与筛选模块接口约束
## 4.1 关键词搜索成果（GET /api/achievements/search）
### 4.1.1 请求参数JSON
```json
{
  "keyword": "人工智能", // String，可选，搜索关键词
  "achievementType": 1, // Number，可选，成果类型
  "author": "赵明泽", // String，可选，作者名
  "institution": "XX大学", // String，可选，机构名
  "startTime": "2020-01-01", // String，可选，发表开始时间（YYYY-MM-DD）
  "endTime": "2024-12-31", // String，可选，发表结束时间（YYYY-MM-DD）
  "pageNum": 1, // Number，必填
  "pageSize": 10 // Number，必填
}
```
### 4.1.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "搜索成功",
  "data": {
    "total": 120, // Number，总成果数
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "achievementId": "ach001",
        "title": "基于AI的图像识别研究",
        "authorList": ["赵明泽", "周鹏"],
        "institutionList": ["XX大学"],
        "publishTime": "2024-05-10",
        "achievementTypeName": "期刊论文",
        "citationCount": 30
      }
    ]
  },
  "timestamp": 1699999999999
}
```

## 4.2 高级筛选成果（GET /api/achievements/filter）
### 4.2.1 请求参数JSON
```json
{
  "keyword": "人工智能", // String，可选
  "achievementType": 1, // Number，可选
  "author": "赵明泽", // String，可选
  "startTime": "2020-01-01", // String，可选
  "endTime": "2024-12-31", // String，可选
  "minImpactFactor": 3.0, // Number，可选，最小影响因子（成果类型=1时生效）
  "maxImpactFactor": 6.0, // Number，可选，最大影响因子
  "projectLevel": 1, // Number，可选，项目级别（成果类型=3时生效）
  "pageNum": 1, // Number，必填
  "pageSize": 10 // Number，必填
}
```
### 4.2.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "筛选成功",
  "data": {
    "total": 25,
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "achievementId": "ach001",
        "title": "基于AI的图像识别研究",
        "authorList": ["赵明泽", "周鹏"],
        "institutionList": ["XX大学"],
        "publishTime": "2024-05-10",
        "achievementTypeName": "期刊论文",
        "impactFactor": 5.2,
        "citationCount": 30
      }
    ]
  },
  "timestamp": 1699999999999
}
```

## 4.3 分类浏览成果（GET /api/achievements/category/{catId}）
### 4.3.1 请求参数JSON
```json
{
  "pageNum": 1, // Number，必填
  "pageSize": 10 // Number，必填
}
```
### 4.3.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "categoryName": "计算机视觉", // String，分类名称
    "total": 89, // Number，该分类下总成果数
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "achievementId": "ach001",
        "title": "基于AI的图像识别研究",
        "authorList": ["赵明泽", "周鹏"],
        "publishTime": "2024-05-10",
        "citationCount": 30
      }
    ]
  },
  "timestamp": 1699999999999
}
```

## 4.4 搜索结果排序（GET /api/achievements/search/sort）
### 4.4.1 请求参数JSON
```json
{
  "keyword": "人工智能", // String，可选，与搜索参数一致
  "author": "赵明泽", // String，可选
  "sortField": 1, // Number，必填，1=引用次数/2=发表时间
  "sortDir": "desc", // String，必填，asc=升序/desc=降序
  "pageNum": 1, // Number，必填
  "pageSize": 10 // Number，必填
}
```
### 4.4.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "排序成功",
  "data": {
    "total": 120,
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "achievementId": "ach002",
        "title": "人工智能在医疗领域的应用",
        "authorList": ["张三", "李四"],
        "citationCount": 58, // 按引用次数降序排列，优先显示高引用成果
        "publishTime": "2023-11-20"
      }
    ]
  },
  "timestamp": 1699999999999
}
```


# 五、社交互动模块接口约束
## 5.1 关注学者（POST /api/users/follow/{scholarId}）
### 5.1.1 请求参数JSON
```json
{} // 无请求参数（scholarId=被关注学者的用户ID，在路径中传递）
```
### 5.1.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "关注成功",
  "data": {
    "followId": "fol001" // String，关注唯一ID
  },
  "timestamp": 1699999999999
}
```

## 5.2 取消关注学者（DELETE /api/users/follow/{scholarId}）
### 5.2.1 请求参数JSON
```json
{} // 无请求参数（scholarId在路径中传递）
```
### 5.2.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "取消关注成功",
  "data": null,
  "timestamp": 1699999999999
}
```

## 5.3 查看关注列表（GET /api/users/follows）
### 5.3.1 请求参数JSON
```json
{
  "pageNum": 1, // Number，必填
  "pageSize": 10 // Number，必填
}
```
### 5.3.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "total": 8, // Number，总关注数
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "scholarId": "22377252",
        "name": "周鹏",
        "institution": "XX大学",
        "avatar": "https://obs-academic.xxx.com/static/avatar/22377252.png",
        "followTime": "2024-09-15 09:30:00" // String，关注时间
      }
    ]
  },
  "timestamp": 1699999999999
}
```

## 5.4 查看收藏列表（GET /api/users/collections）
### 5.4.1 请求参数JSON
```json
{
  "achievementType": 1, // Number，可选，筛选成果类型
  "pageNum": 1, // Number，必填
  "pageSize": 10 // Number，必填
}
```
### 5.4.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "total": 12, // Number，总收藏数
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "collectId": "col001",
        "achievementId": "ach001",
        "title": "基于AI的图像识别研究",
        "authorList": ["赵明泽", "周鹏"],
        "publishTime": "2024-05-10",
        "collectTime": "2024-09-20 16:00:00" // String，收藏时间
      }
    ]
  },
  "timestamp": 1699999999999
}
```

## 5.5 触发成果引用通知（后端调用）（POST /api/achievements/quote/notify）
### 5.5.1 请求参数JSON
```json
{
  "quotedAchId": "ach001", // String，必填，被引用成果ID
  "quoteAchId": "ach003", // String，必填，引用成果ID
  "quoterUserId": "23371026" // String，必填，引用作者的用户ID
}
```
### 5.5.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "通知已触发",
  "data": {
    "notifyId": "not002" // String，通知ID（通过Kafka异步推送）
  },
  "timestamp": 1699999999999
}
```


# 六、数据同步模块接口约束
## 6.1 从公共学术数据库拉取数据（POST /api/sync/public-db）
### 6.1.1 请求参数JSON
```json
{
  "dbType": 1, // Number，必填，1=OpenAlex/2=DBLP
  "keyword": "人工智能" //String, 可选，筛选关键词
  "startTime": "2024-09-01", // String，必填，同步开始时间（YYYY-MM-DD）
  "endTime": "2024-09-30", // String，必填，同步结束时间
  "pageNum": 1, // Number，必填，从第一页开始，逐渐递增
  "pageSize": 25 // Number，必填，单次同步条数，又即每页论文数量
}
```
### 6.1.2 返回数据JSON
```json
{
  "code": 1,
  "msg": "同步任务已启动",
  "data": {
    "syncLogId": "sync001", // String，同步日志ID
    "totalCount": 25, // Number，待同步数据总量
  },
  "timestamp": 1699999999999
}
```

### 6.1.3 参数验证失败
````json
{
  "code": -1,
  "msg": "请求参数无效：dbType 参数错误，可选值为 1 (OpenAlex) 或 2 (DBLP)",
  "data": {},
  "timestamp": 1699999999999
}
````

### 6.1.4 数据库服务不可用
````json
{
  "code": -2,
  "msg": "上游学术数据库服务暂时不可用，请稍后重试",
  "data": {},
  "timestamp": 1699999999999
}
````

### 6.1.5 内部服务器错误
````json
{
  "code": -3,
  "msg": "同步任务启动失败，请稍后重试或联系系统管理员",
  "data": {},
  "timestamp": 1699999999999
}
````

### 6.1.6 请求频率超限
````json
{
  "code": -4,
  "msg": "请求过于频繁，请60秒后再试",
  "data": {},
  "timestamp": 1699999999999
}
````

## 6.2 从学术搜索引擎拉取索引（POST /api/sync/search-engine）
### 6.2.1 请求参数JSON
```json
{
  "engineType": 1, // Number，必填，1=百度学术/2=谷歌学术
  "keyword": "人工智能", // String，可选，筛选关键词
  "startTime": "2024-09-01", // String，必填
  "endTime": "2024-09-30", // String，必填
  "pageNum": 1, // Number，必填
  "pageSize": 25 // Number，必填
}
```
### 6.2.2 返回数据JSON
```json
{
  "code": 1,
  "msg": "索引拉取任务已启动",
  "data": {
    "syncLogId": "sync002",
    "totalCount": 50,
  },
  "timestamp": 1699999999999
}
```

### 6.2.3 搜索引擎认证失败
````json
{
  "code": -1,
  "msg": "搜索引擎认证失败，API密钥无效或已过期",
  "data": {},
  "timestamp": 1699999999999
}
````

### 6.2.4 请求被风控拒绝
````json
{
  "code": -2,
  "msg": "请求被拒绝，该搜索关键词因合规原因被禁止",
  "data": {},
  "timestamp": 1699999999999
}
````

### 6.2.3 无搜索结果
````json
{
  "code": -3,
  "msg": "未找到符合条件的索引数据",
  "data": {},
  "timestamp": 1699999999999
}
````

### 6.2.3 业务逻辑错误
````json
{
  "code": -4,
  "msg": "时间范围不能超过365天",
  "data": {},
  "timestamp": 1699999999999
}
````

# 七、统计分析模块接口约束
## 7.1 分析科研领域热点（GET /api/analysis/hot-topics）
### 7.1.1 请求参数JSON
```json
{
  "timeRange": "2024-01-01至2024-09-30", // String，必填，分析时间范围
  "domainId": "dom001", // String，必填，学科领域ID（如计算机科学）
  "analysisDim": 1 // Number，必填，1=词频分析/2=趋势分析
}
```
### 7.1.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "分析成功",
  "data": {
    "reportId": "rep001", // String，分析报告ID
    "hotTopics": [
      {
        "keyword": "生成式AI", // String，热点关键词
        "count": 1200, // Number，出现次数（词频分析）
        "trendData": [100, 150, 200, 250, 300, 200] // Array<Number>，月度趋势（趋势分析）
      }
    ],
    "emergingDirs": ["AI+教育", "AI+医疗"] // Array<String>，新兴研究方向
  },
  "timestamp": 1699999999999
}
```

## 7.2 导出热点分析报告（GET /api/analysis/report/{reportId}）
### 7.2.1 请求参数JSON
```json
{
  "reportFormat": 1 // Number，必填，1=PDF/2=Excel
}
```
### 7.2.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "导出成功",
  "data": {
    "reportUrl": "https://obs-academic.xxx.com/static/reports/rep001.pdf?sign=xxx", // String，OBS下载链接
    "expireTime": "2024-10-02 12:00:00"
  },
  "timestamp": 1699999999999
}
```

## 7.3 成果数据统计（总量/分类）（GET /api/analysis/achievements）
### 7.3.1 请求参数JSON
```json
{
  "timeRange": "2024-01-01至2024-09-30", // String，必填
  "institution": "XX大学", // String，可选，筛选机构
  "achievementType": 1 // Number，可选，筛选成果类型
}
```
### 7.3.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "统计成功",
  "data": {
    "totalCount": 5000, // Number，总成果数
    "typeDistribution": [
      { "type": 1, "typeName": "期刊论文", "count": 3000, "rate": 60 }, // rate=占比（%）
      { "type": 2, "typeName": "专利", "count": 1000, "rate": 20 }
    ],
    "yearlyGrowth": [
      { "year": 2024, "count": 5000, "growthRate": 15 } // growthRate=同比增长率（%）
    ]
  },
  "timestamp": 1699999999999
}
```


# 八、系统管理模块接口约束
## 8.1 管理学术领域分类体系（POST /api/admin/categories）
### 8.1.1 请求参数JSON
```json
{
  "categoryName": "计算机视觉", // String，必填，分类名称
  "parentCatId": "0", // String，必填，父分类ID（0=顶级分类）
  "description": "包含图像识别、目标检测等方向" // String，可选，分类描述
}
```
### 8.1.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "新增成功",
  "data": {
    "categoryId": "dom002" // String，分类唯一ID
  },
  "timestamp": 1699999999999
}
```

## 8.2 修改学术领域分类（PUT /api/admin/categories/{catId}）
### 8.2.1 请求参数JSON
```json
{
  "categoryName": "计算机视觉与图像识别", // String，可选，新分类名称
  "description": "更新后的分类描述...", // String，可选
  "status": 1 // Number，可选，1=启用/0=禁用
}
```
### 8.2.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "修改成功",
  "data": {
    "categoryId": "dom002",
    "categoryName": "计算机视觉与图像识别",
    "status": 1
  },
  "timestamp": 1699999999999
}
```

## 8.3 删除学术领域分类（DELETE /api/admin/categories/{catId}）
### 8.3.1 请求参数JSON
```json
{} // 无请求参数
```
### 8.3.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "删除成功",
  "data": null,
  "timestamp": 1699999999999
}
```

## 8.4 数据处理员更新基础数据库（POST /api/data-processor/db/update）
### 8.4.1 请求参数JSON
```json
{
  "dataType": 1, // Number，必填，1=论文/2=专利
  "apiKey": "abc123def456", // String，必填，数据源API密钥
  "crawlRule": "优先抓取核心期刊数据", // String，可选，爬虫规则描述
  "syncTime": "2024-10-01 02:00:00" // String，必填，同步执行时间
}
```
### 8.4.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "更新任务已配置",
  "data": {
    "updateTaskId": "dbTask001", // String，更新任务ID
    "estimatedCount": 2000 // Number，预估更新数据量
  },
  "timestamp": 1699999999999
}
```

## 8.5 查看系统操作日志（GET /api/admin/logs）
### 8.5.1 请求参数JSON
```json
{
  "operatorId": "23373268", // String，可选，操作人ID
  "operateType": "login", // String，可选，操作类型（login/audit/sync）
  "startTime": "2024-09-30 00:00:00", // String，可选，操作开始时间
  "endTime": "2024-10-01 23:59:59", // String，可选，操作结束时间
  "pageNum": 1, // Number，必填
  "pageSize": 10 // Number，必填
}
```
### 8.5.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "total": 150, // Number，总日志数
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "logId": "log001",
        "operatorId": "23373268",
        "operatorName": "赵明泽",
        "operateType": "login",
        "operateContent": "用户登录系统",
        "operateIp": "192.168.1.100", // String，操作IP
        "operateTime": "2024-10-01 09:00:00"
      }
    ]
  },
  "timestamp": 1699999999999
}
```

## 8.6 系统参数配置（管理员）（PUT /api/admin/configs）
### 8.6.1 请求参数JSON
```json
{
  "configType": 1, // Number，必填，1=数据同步周期/2=密码复杂度/3=成果审核阈值
  "configValue": "24", // String，必填，参数值（1=24小时/2=8-20位/3=90分）
  "description": "数据同步周期设置为24小时" // String，可选，参数描述
}
```
### 8.6.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "配置成功",
  "data": {
    "configType": 1,
    "configValue": "24",
    "updateTime": "2024-10-01 10:00:00"
  },
  "timestamp": 1699999999999
}
```


# 九、财务模块接口约束
## 9.1 提交成果下载交易记录（POST /api/finance/transactions）
### 9.1.1 请求参数JSON
```json
{
  "achievementId": "ach001", // String，必填，成果ID
  "userId": "23371026", // String，必填，用户ID
  "amount": 5.0, // Number，必填，支付金额（元）
  "payMethod": 1 // Number，必填，1=微信支付/2=支付宝
}
```
### 9.1.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "交易记录已提交",
  "data": {
    "transactionId": "trans001", // String，交易记录ID
    "payStatus": 1 // Number，1=待支付/2=支付成功/3=支付失败
  },
  "timestamp": 1699999999999
}
```

## 9.2 接收财务系统支付状态反馈（PUT /api/finance/transactions/{transId}）
### 9.2.1 请求参数JSON
```json
{
  "payStatus": 2, // Number，必填，2=支付成功/3=支付失败
  "payTime": "2024-10-01 11:30:00", // String，必填，支付时间
  "transactionNo": "20241001113000001" // String，必填，第三方支付流水号
}
```
### 9.2.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "支付状态已同步",
  "data": {
    "transactionId": "trans001",
    "payStatus": 2,
    "updateTime": "2024-10-01 11:30:05"
  },
  "timestamp": 1699999999999
}
```

## 9.3 查询用户交易记录（GET /api/finance/transactions/user）
### 9.3.1 请求参数JSON
```json
{
  "startTime": "2024-09-01", // String，可选，交易开始时间
  "endTime": "2024-10-01", // String，可选，交易结束时间
  "pageNum": 1, // Number，必填
  "pageSize": 10 // Number，必填
}
```
### 9.3.2 返回数据JSON
```json
{
  "code": 200,
  "msg": "查询成功",
  "data": {
    "total": 3, // Number，总交易数
    "pageNum": 1,
    "pageSize": 10,
    "list": [
      {
        "transactionId": "trans001",
        "achievementTitle": "基于AI的图像识别研究",
        "amount": 5.0,
        "payStatus": 2,
        "payMethod": "微信支付",
        "payTime": "2024-10-01 11:30:00"
      }
    ]
  },
  "timestamp": 1699999999999
}
```