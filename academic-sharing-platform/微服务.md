# 学术成果分享平台微服务拆分方案

基于详细的接口文档，建议拆分为以下**7个微服务**：

## 1. **用户服务 (User Service)**
**职责**：用户管理、认证授权、门户认领

**接口列表**：
- `POST /api/users/researcher/register`    # 门户认领
- `POST /api/users/normal/register`        # 普通用户注册
- `POST /api/users/login`                  # 多角色登录
- `POST /api/users/logout`                 # 退出登录
- `GET  /api/users/current`                # 获取当前用户信息
- `PUT  /api/users/current`                # 修改用户信息
- `POST /api/users/password/reset`         # 密码重置
- `PUT  /api/admin/users/audit/{userId}`   # 管理员审核科研人员
- `POST /api/users/follow/{scholarId}`     # 关注学者
- `DELETE /api/users/follow/{scholarId}`   # 取消关注
- `GET  /api/users/follows`                # 查看关注列表
- `POST /api/achievements/quote/notify`    # 触发引用通知（内部调用）

**数据库**：MinIO

## 2. **学术成果服务 (Achievement Service)**
**职责**：成果CRUD、收藏管理、引用通知

**接口列表**：
- `POST /api/achievements`                     # 上传成果
- `PUT  /api/achievements/{achId}`             # 修改成果
- `DELETE /api/achievements/{achId}`           # 删除成果
- `GET  /api/achievements/{achId}`             # 浏览成果详情
- `GET  /api/achievements/{achId}/download`    # 下载成果全文
- `POST /api/achievements/{achId}/collect`     # 收藏成果
- `DELETE /api/achievements/{achId}/collect`   # 取消收藏
- `GET  /api/achievements/collections`         # 查看收藏列表
- `GET  /api/achievements/notifications`       # 获取引用通知
- `PUT  /api/achievements/notifications/{notifyId}` # 标记通知已读
- `POST  /api/achievements/report/{achId}`     # 举报成果存在问题(有问题)

**数据库**：MySQL

## 3. **搜索服务 (Search Service)**
**职责**：成果检索、筛选、排序、分类浏览

**接口列表**：
- `GET /api/achievements/search`           # 关键词搜索成果
- `GET /api/achievements/filter`           # 高级筛选成果
- `GET /api/achievements/category/{catId}` # 分类浏览成果
- `GET /api/achievements/search/sort`      # 搜索结果排序

## 4. **数据同步服务 (Data Sync Service)**
**职责**：外部数据采集、数据清洗、数据库更新

**接口列表**：
- `POST /api/sync/public-db`               # 从公共数据库拉取数据，上传到学术成果服务成功后，再上传到文件服务内

## 5. **文件服务 (File Service)**
**职责**：文件上传下载、OBS集成、文件权限验证

**内部接口**：
- `POST /internal/files/upload`     # 文件上传
- `GET  /internal/files/{fileId}`   # 文件信息查询
- `GET  /internal/files/{fileId}/download` # 生成下载链接
- `DELETE /internal/files/{fileId}` # 文件删除

**数据库**：MongoDB

## 6. **统计分析服务 (Analytics Service)**
**职责**：数据统计、热点分析、报告生成

**接口列表**：
- `GET /api/analysis/hot-topics`           # 分析科研领域热点
- `GET /api/analysis/report/{reportId}`    # 导出热点分析报告
- `GET /api/analysis/achievements`         # 成果数据统计

**数据库**：MySQL

## 7. **系统管理服务 (System Management Service)**
**职责**：分类管理、系统配置、操作日志

**接口列表**：
- `POST /api/admin/categories`              # 管理学术领域分类
- `PUT  /api/admin/categories/{catId}`      # 修改学术领域分类
- `DELETE /api/admin/categories/{catId}`    # 删除学术领域分类
- `DELETE /api/admin/categories/{catId}`    # 删除学术领域分类
- `GET  /api/admin/logs`                    # 查看系统操作日志
- `PUT  /api/admin/configs`                 # 系统参数配置

**数据库**：MySQL

## 服务依赖关系

